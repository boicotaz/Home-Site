{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=2)}([function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,\"a\",(function(){return f}));var f=function(e){function t(e){var n;o(this,t),n.state={},(n=i(this,s(t).call(this,e))).state.usersInGroup=e.usersInGroup,n.state.groupDetails=e.groupDetails;var r=e.usersInGroup.map((function(e){return e[1]})),u=new CustomEvent(\"LoggedInStatus\",{detail:{currentUserId:e.currentUser.id,usersInGroupId:r}});return document.dispatchEvent(u),document.addEventListener(\"LoggedInStatusReply\",(function(e){n.setState({loggedInMembersId:e.detail})})),n}return c(t,React.Component),a(t,[{key:\"render\",value:function(){var e=this;return React.createElement(\"div\",{id:\"group-dashboard\",className:\"jumbotron col-3 ml-5 mt-3\"},React.createElement(\"h1\",{className:\"display-6\"},\" \",React.createElement(\"i\",{className:\"fa fa-home\"},\" \"),\" \",this.state.groupDetails.groupName,\" \"),React.createElement(\"hr\",{className:\"my-4\"}),React.createElement(\"p\",{className:\"lead\"},\" Users in group \"),React.createElement(\"div\",{id:\"usersInGroup\",className:\"lead\"},this.state.usersInGroup.map((function(t){return React.createElement(p,{user:t,key:t[1],groupMemberId:t[1],loggedInMembersId:e.state.loggedInMembersId})}))),React.createElement(\"button\",{id:\"add-user\",type:\"button\",\"data-toggle\":\"modal\",\"data-target\":\"#addUserForm\",className:\"btn btn-secondary mt-5\"},\" Add users in group \"))}}]),t}(),p=function(e){function t(){return o(this,t),i(this,s(t).apply(this,arguments))}return c(t,React.Component),a(t,[{key:\"render\",value:function(){var e;return e=void 0===this.props.loggedInMembersId?\"btn-danger\":this.props.loggedInMembersId.includes(this.props.user[1])?\"btn-success\":\"btn-danger\",React.createElement(\"a\",{className:\"btn btn-lg mr-1 mb-2 \"+e,href:\"#\",role:\"button\"},this.props.user[0])}}]),t}()},,function(e,t,n){\"use strict\";n.r(t);n(0);function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n.state={},(n=u(this,a(t).call(this,e))).state.usersInGroup=e.usersInGroup,n.state.groupDetails=e.groupDetails,n.state.currentUser=e.currentUser;var r=new Map;e.usersInGroup.forEach((function(e){r.set(e[2],\"\".concat(e[0],\" \").concat(e[1]))}));var o=!0,i=!1,s=void 0;try{for(var c,l=r.keys()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;console.log(r.get(f))}}catch(e){i=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}return n}var n,r,s;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,React.Component),n=t,(r=[{key:\"render\",value:function(){return React.createElement(\"div\",{className:\"row\"},React.createElement(Group,{usersInGroup:this.state.usersInGroup,groupDetails:this.state.groupDetails,currentUser:this.state.currentUser},\" \"))}}])&&o(n.prototype,r),s&&o(n,s),t}();function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}var l,f,p=new CustomEvent(\"buttons-created\",{state:\"done\"});f=myUser,$(\"#group-dashboard\").length||($(\"#content\").remove(),$(\"#content-container\").append(\"<div id = 'content'></div>\"),Promise.all([m(),new Promise((function(e,t){$.ajax({url:\"/api/get-group-details\",type:\"GET\",success:function(t){e(t)},error:function(e){t(e)}})})),new Promise((function(e,t){$.ajax({url:\"/home/get-group-messages\",method:\"GET\",dataType:\"json\",success:function(t){console.log(\"get group message data:\",t),e(t)},error:function(e){t(e)}})}))]).then((function(e){console.log(\"Results are from Promise.all: \",e);var t=c(e,3),n=t[0],r=t[1];t[2],ReactDOM.render(React.createElement(s,{usersInGroup:n,groupDetails:r,currentUser:f},\" \"),document.getElementById(\"content\"))})).catch((function(e){return console.log(e)})));function d(){return new Promise((function(e,t){$.ajax({url:\"/api/get-users\",type:\"GET\",success:function(t){e(t)},error:function(e){t(e)}})}))}function m(){return new Promise((function(e,t){$.ajax({url:\"/api/get-users-in-group\",type:\"POST\",success:function(t){t,window.dispatchEvent(p),e(t)},error:function(e){t(e)}})}))}$(document).ready((function(){$.ajax({url:\"/api/get-current-user\",type:\"GET\",success:function(e){l=e}});d().then((function(e){var t=e,n=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,local:t});$(\"#search-bar\").typeahead({hint:!0,highlight:!0,minLength:1},{name:\"user_suggestions\",source:y(n)})})),Promise.all([d(),m()]).then((function(e){var t=e[0],n=e[1].map((function(e){return e[1]})),r=t.filter((function(e){if(!n.includes(e[1]))return e})),o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,local:r});$(\"#add-user-in-group-field\").typeahead({hint:!0,highlight:!0,minLength:1},{name:\"add_in_group_suggestions\",source:y(o)})}))})),$(\"#add-user-form\").submit((function(e){e.preventDefault();var t=$(this).serializeArray();t[0].user=l;$.ajax({url:\"/add-user-in-group\",type:\"POST\",data:t[0],dataType:\"json\",success:function(e){$(\"#strong-added-success\").text(t[0].value),$(\"#user-added-success\").show((function(){var e=setInterval((function(){$(\"#addUserForm\").modal(\"hide\"),window.clearInterval(e)}),3e3)})),renderGroup(e.group)}})}));var y=function(e){return function(t,n){var r,o=e.local.map((function(e){return e[0]}));r=[];var u=new RegExp(t,\"i\");$.each(o,(function(e,t){u.test(t)&&r.push(t)})),n(r)}}}]);","extractedComments":[]}